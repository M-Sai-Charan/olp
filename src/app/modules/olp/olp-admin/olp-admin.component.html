<div
  class="header invoice-header flex align-items-center justify-content-between mb-4 p-3 bg-primary text-white border-round shadow-2">
  <img src="olp-logo.png" alt="Logo" height="30" class="mr-3">
  <h2 style="text-align: center;
      margin: 10px;
      padding-left: 100px;">OLP Employees</h2>
  <small class="italic">Delivering timeless moments beautifully</small>
</div>
<p-card>
  <p-table #dt2 [value]="olpEmployees" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5, 10, 20]"
    [globalFilterFields]="['bride', 'groom', 'contactNumber', 'email', 'status']"
    [tableStyle]="{ 'min-width': '65rem' }" responsiveLayout="scroll">

    <ng-template #caption>
      <div class="flex justify-between align-items-center gap-4 flex-wrap">
        <p-button label="Add New Employee" icon="pi pi-user-plus" severity="success" styleClass="w-full md:w-auto"
          (click)="onAddNewEmployee()"></p-button>
      </div>
    </ng-template>

    <ng-template #header>
      <tr>
        <th>Name</th>
        <th>Contact</th>
        <th>Email</th>
        <th>Role</th>
        <th>Status</th>
        <th>Joined On</th>
        <th class="text-center">Actions</th>
      </tr>
    </ng-template>

    <ng-template #body let-user>
      <tr class="hover:bg-surface-200">
        <td>{{ user.bride }}</td>
        <td>{{ user.groom }}</td>
        <td>{{ user.contactNumber }}</td>
        <td>{{ user.email }}</td>
        <td>
          <p-tag [value]="user.callStatus?.name" severity="success"></p-tag>
        </td>
        <td>{{ user.contactNumber }}</td>
        <td class="text-center">
        </td>
      </tr>
    </ng-template>
  </p-table>
  <div *ngIf="olpEmployees?.length === 0" class="no-data-container">
    <svg class="no-data-icon" xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 64 64"
      fill="none">
      <path d="M8 20h48v28a4 4 0 01-4 4H12a4 4 0 01-4-4V20z" fill="#F0F0F0" stroke="#3F51B5" stroke-width="2" />
      <path d="M24 20l2.667-4h10.666L40 20" fill="#3F51B5" />
      <circle cx="32" cy="34" r="9" fill="#fff" stroke="#3F51B5" stroke-width="2" />
      <circle cx="32" cy="34" r="5" fill="#3F51B5" />
      <rect x="46" y="25" width="6" height="6" rx="1" fill="#3F51B5" />
      <path d="M8 20l8-10h14l2 2h12l2-2h10l8 10" stroke="#3F51B5" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round" />
    </svg>
    <p class="no-data-text">No employees found.</p>
  </div>
</p-card>

<p-dialog [(visible)]="showemployeeHeader" [modal]="true" [draggable]="false" [resizable]="false"
  [style]="{ width: '95vw', maxHeight: '90vh' }" [breakpoints]="{ '1199px': '75vw', '575px': '95vw' }"
  [header]="employeeHeader" class="olp-dialog">
  <div class="surface-card p-4 shadow-2 border-round form-container max-w-screen-lg mx-auto relative">
    <form [formGroup]="adminForm" (ngSubmit)="submitForm()">
      <div class="grid formgrid p-fluid">

        <!-- ðŸ‘¤ Basic Info -->
        <p-fieldset legend="ðŸ‘¤ Basic Information" toggleable class="section-card col-12">
          <div class="grid mt-2">
            <div class="field col-12 md:col-4">
              <label for="name">Name</label>
              <input id="name" type="text" pInputText formControlName="name" placeholder="John Doe" />
              <p-message *ngIf="isInvalid('name')" severity="error" text="Required">
              </p-message>
            </div>

            <div class="field col-12 md:col-4">
              <label for="gender">Gender</label>
              <p-dropdown [options]="genders" formControlName="gender" placeholder="Select Gender"></p-dropdown>
              <p-message *ngIf="isInvalid('gender')" severity="error" text="Required"></p-message>
            </div>

            <div class="field col-12 md:col-4">
              <label for="dob">Date of Birth</label>
              <p-calendar formControlName="dob" dateFormat="dd-mm-yy" placeholder="Select Date"
                styleClass="w-full"></p-calendar>
              <p-message *ngIf="isInvalid('dob')" severity="error" text="Required"></p-message>
            </div>
          </div>
        </p-fieldset>

        <!-- ðŸ¢ Work Details -->
        <p-fieldset legend="ðŸ¢ Work Details" toggleable class="section-card col-12">
          <div class="grid mt-2">
            <div class="field col-12 md:col-6">
              <label for="email">Email</label>
              <input id="email" type="email" pInputText formControlName="email" />
              <p-message *ngIf="isInvalid('email')" severity="error" text="Valid email required"></p-message>
            </div>

            <div class="field col-12 md:col-6">
              <label for="phone">Phone</label>
              <input id="phone" type="text" pInputText formControlName="phone" />
              <p-message *ngIf="isInvalid('phone')" severity="error" text="Required"></p-message>
            </div>

            <div class="field col-12">
              <label for="address">Address</label>
              <textarea id="address" pInputTextarea formControlName="address" rows="2"></textarea>
              <p-message *ngIf="isInvalid('address')" severity="error" text="Required"></p-message>
            </div>

            <div class="field col-12 md:col-6">
              <label>Joining Date</label>
              <p-calendar formControlName="joiningDate" dateFormat="dd-mm-yy" placeholder="Select Date"
                styleClass="w-full"></p-calendar>
            </div>

            <div class="field col-12 md:col-6">
              <label>Exit Date</label>
              <p-calendar formControlName="exitDate" dateFormat="dd-mm-yy" placeholder="Select Date"
                styleClass="w-full"></p-calendar>
            </div>

            <div class="field col-12 md:col-4">
              <label>Team</label>
              <p-dropdown [options]="teams" formControlName="team" optionLabel="name" placeholder="Team"></p-dropdown>
            </div>

            <div class="field col-12 md:col-4">
              <label>Role</label>
              <p-dropdown [options]="roles" formControlName="role" optionLabel="name" placeholder="Role"></p-dropdown>
            </div>

            <div class="field col-12 md:col-4">
              <label>Allowed Routes</label>
              <p-multiSelect [options]="Routes" formControlName="routes" optionLabel="label" placeholder="Role"
                styleClass="w-full"></p-multiSelect>
            </div>
          </div>
        </p-fieldset>

        <!-- ðŸ†˜ Emergency Contact -->
        <p-fieldset legend="ðŸ†˜ Emergency Contact" toggleable class="section-card col-12">
          <div class="grid">
            <div class="field col-12 md:col-4">
              <label>Name</label>
              <input type="text" pInputText formControlName="emergencyName" />
            </div>
            <div class="field col-12 md:col-4">
              <label>Relation</label>
              <input type="text" pInputText formControlName="emergencyRelation" />
            </div>
            <div class="field col-12 md:col-4">
              <label>Phone</label>
              <input type="text" pInputText formControlName="emergencyPhone" />
            </div>
          </div>
        </p-fieldset>

        <!-- ðŸ†” Documents -->
        <p-fieldset legend="ðŸ†” Identity Details" toggleable class="section-card col-12">
          <div class="grid">
            <div class="field col-12 md:col-4">
              <label>Aadhar</label>
              <input type="text" pInputText formControlName="aadhar" />
            </div>
            <div class="field col-12 md:col-4">
              <label>PAN</label>
              <input type="text" pInputText formControlName="pan" />
            </div>
            <div class="field col-12 md:col-4">
              <label>Blood Group</label>
              <input type="text" pInputText formControlName="bloodGroup" />
            </div>
          </div>
        </p-fieldset>
      </div>

      <!-- Buttons -->
      <div class="text-right mt-3">
        <button pButton type="submit" label="Save" class="p-button-success mr-2"
          [disabled]="adminForm.invalid"></button>
        <button pButton type="button" label="Reset" class="p-button-secondary" (click)="onReset()"></button>
      </div>
    </form>
  </div>
</p-dialog>